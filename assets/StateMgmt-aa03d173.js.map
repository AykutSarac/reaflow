{"version":3,"file":"StateMgmt-aa03d173.js","sources":["../../docs/Advanced/StateMgmt.mdx"],"sourcesContent":["import { Meta } from '@storybook/addon-docs/blocks';\n\n<Meta title=\"Docs/Advanced/State Management\" />\n\n# State Management\n\nThis Storybook demo showcases `React.useState` as state manager, because it's very simple to comprehend and simple apps could actually use it for real.\n\nAlthough, as your app growths, you might need to have some **shared state** and use a shared State manager (Redux, Recoil, xState, MobX, etc.).\n\n## What state manager should be used with reaflow?\n\nReaflow is store-agnostic and doesn't recommend any store manager in particular. The choice is yours.\n\nIf you're unfamiliar with React State managers, we recommend watching [What State Management Library Should I Use with React?](https://www.youtube.com/watch?v=u_o09PD_qAs&feature=emb_logo&ab_channel=LeeRobinson).\n\n## Immutability when using `React.useState`\n\n> If you're using `React.useState`, be careful about immutability.\n\nWhile React `useState` will not throw when mutate the state directly, it won't actually work.\n\n```tsx\nimport React, { useState } from 'react';\nimport { NodeData } from 'reaflow';\n\nconst [nodes, setNodes] = useState<NodeData[]>([]);\n\n...\n\nconst newNodes = nodes; // DO NOT DO THAT\nnewNodes[0] = { id: '1' };\nconsole.log('updateCurrentNode new nodes', newNodes); // Will print the expected object\n\nsetNodes(newNodes); // Will not crash, but won't actually mutate the state for real\n\n```\n\nYou must not mutate the state directly `nodes`, but clone it first.\n\n```tsx\nimport cloneDeep from 'lodash.clonedeep';\n\nconst newNodes = nodes; // DO NOT DO THAT\nconst newNodes = cloneDeep(nodes); // Do that instead\n```\n\nYou can use the library of your choice to clone the state, `lodash.clonedeep` is a good choice.\n\n> [This is not a bug, it's expected](https://github.com/reaviz/reaflow/issues/43#issuecomment-774012401). Although, it is very confusing because `newNodes` shows the expected value in the console.\nIt would be a better developer experience for React to throw an exception when mutating the state directly. _(it's what `recoil` does)_\n\n## Community examples\n\n- [Vadorequest/poc-nextjs-reaflow](https://github.com/Vadorequest/poc-nextjs-reaflow) uses **[Recoil](https://recoiljs.org/)** as shared State Manager.\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Meta","MDXContent","MDXLayout"],"mappings":"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"}